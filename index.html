<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MHIGS - META HUMAN IDENTIFICATION GLOBAL SYSTEM</title>

<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#0a0f14,#16202a);
color:#e0f7ff;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.container{
background:#111c24;
padding:30px;
border-radius:15px;
width:350px;
box-shadow:0 0 20px rgba(0,255,255,0.2);
}

input,button{
width:100%;
padding:10px;
margin:8px 0;
border:none;
border-radius:8px;
}

input{
background:#1e2d3a;
color:white;
}

button{
background:#00c3ff;
color:white;
font-weight:bold;
cursor:pointer;
}

button:hover{
background:#0099cc;
}
</style>
</head>
<body>

<div class="container">
<h2>MHIGS Access</h2>
<input type="email" id="email" placeholder="Correo">
<input type="password" id="password" placeholder="ContraseÃ±a">
<button onclick="register()">Registrarse</button>
<button onclick="login()">Ingresar</button>
<p id="message"></p>
</div>

<script type="module">

// ðŸ”¥ FIREBASE IMPORTS (SOLO CDN, NO NPM)
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyDeuX21naEnxCmXZW1BxVbrRMbFjN4fF70",
  authDomain: "mhigs-database-01.firebaseapp.com",
  projectId: "mhigs-database-01",
  storageBucket: "mhigs-database-01.firebasestorage.app",
  messagingSenderId: "613030409692",
  appId: "1:613030409692:web:791e7a2f9ac5fc58c00b19"
};

// INICIALIZAR
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// REGISTRO
window.register = async function(){
const email = document.getElementById("email").value;
const password = document.getElementById("password").value;

try{
const userCredential = await createUserWithEmailAndPassword(auth,email,password);
const user = userCredential.user;

await setDoc(doc(db,"users",user.uid),{
email: email,
role: "Analista",
createdAt: new Date()
});

document.getElementById("message").innerText="Usuario creado.";
}catch(error){
document.getElementById("message").innerText=error.message;
}
}

// LOGIN
window.login = async function(){
const email = document.getElementById("email").value;
const password = document.getElementById("password").value;

try{
const userCredential = await signInWithEmailAndPassword(auth,email,password);
const user = userCredential.user;

const userDoc = await getDoc(doc(db,"users",user.uid));
const role = userDoc.data().role;

document.getElementById("message").innerText="Bienvenido. Rol: "+role;

}catch(error){
document.getElementById("message").innerText=error.message;
}
}

</script>
</body>
</html>
